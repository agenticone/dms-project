{
  "realm": "dms-realm",
  "clients": [
    {
      "clientId": "jbpm-client",
      "enabled": true,
      "protocol": "openid-connect",
      "clientAuthenticatorType": "client-secret",
      "secret": "clientsecret",
      "redirectUris": [
        "https://${JBPM_HOSTNAME}/business-central/*"
      ],
      "webOrigins": [
        "https://${JBPM_HOSTNAME}"
      ],
      "standardFlowEnabled": true,
      "directAccessGrantsEnabled": true,
      "publicClient": false
    }
  ],
  "roles": {
    "client": {
      "jbpm-client": [
        { "name": "user", "description": "jBPM user role" },
        { "name": "admin", "description": "jBPM admin role" }
      ]
    }
  },
  "components": {
    "org.keycloak.storage.UserStorageProvider": [
      {
        "name": "dms-openldap",
        "providerId": "ldap",
        "subComponents": {
          "org.keycloak.storage.ldap.mappers.LDAPStorageMapper": [
            {
              "name": "username",
              "providerId": "user-attribute-ldap-mapper",
              "config": {
                "ldap.attribute": ["uid"],
                "user.model.attribute": ["username"],
                "read.only": ["true"],
                "always.read.value.from.ldap": ["true"],
                "is.mandatory.in.ldap": ["true"]
              }
            },
            {
              "name": "email",
              "providerId": "user-attribute-ldap-mapper",
              "config": {
                "ldap.attribute": ["mail"],
                "user.model.attribute": ["email"],
                "read.only": ["true"],
                "always.read.value.from.ldap": ["true"],
                "is.mandatory.in.ldap": ["true"]
              }
            },
            {
              "name": "first name",
              "providerId": "user-attribute-ldap-mapper",
              "config": {
                "ldap.attribute": ["givenName"],
                "user.model.attribute": ["firstName"],
                "read.only": ["true"],
                "always.read.value.from.ldap": ["true"],
                "is.mandatory.in.ldap": ["true"]
              }
            },
            {
              "name": "last name",
              "providerId": "user-attribute-ldap-mapper",
              "config": {
                "ldap.attribute": ["sn"],
                "user.model.attribute": ["lastName"],
                "read.only": ["true"],
                "always.read.value.from.ldap": ["true"],
                "is.mandatory.in.ldap": ["true"]
              }
            },
            {
              "name": "group-mapper",
              "providerId": "group-ldap-mapper",
              "config": {
                "groups.dn": ["ou=groups,dc=dms,dc=local"],
                "group.name.ldap.attribute": ["cn"],
                "group.object.classes": ["groupOfNames"],
                "membership.ldap.attribute": ["member"],
                "membership.attribute.type": ["DN"],
                "mode": ["READ_ONLY"],
                "preserve.group.inheritance": ["true"]
              }
            }
          ]
        },
        "config": {
          "enabled": ["true"],
          "vendor": ["other"],
          "usernameLDAPAttribute": ["uid"],
          "rdnLDAPAttribute": ["uid"],
          "uuidLDAPAttribute": ["entryUUID"],
          "userObjectClasses": ["inetOrgPerson, organizationalPerson, person"],
          "connectionUrl": ["ldap://openldap:1389"],
          "usersDn": ["ou=users,dc=dms,dc=local"],
          "authType": ["simple"],
          "bindDn": ["cn=admin,dc=dms,dc=local"],
          "bindCredential": ["${LDAP_ADMIN_PASSWORD}"],
          "editMode": ["READ_ONLY"],
          "importEnabled": ["true"]
        }
      }
    ]
  }
}
